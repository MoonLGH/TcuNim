{"mappings":"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","sources":["src/assets/js/watch.js"],"sourcesContent":["const query = new URLSearchParams(window.location.search)\n\nlet provider = query.get(\"provider\")\nlet id = query.get(\"id\")\n\nconsole.log(`provider of ${provider}`)\nconsole.log(`query of ${id}`)\n\nlet videoList = []\nmenu()\nasync function menu() {\n    let api = localStorage.getItem(\"API\");\n    try {\n        let data = await fetch(api + \"api/extension?extension=\" + provider)\n        data = await data.json();\n        console.log(data)\n        document.querySelector(\"#topCard\").innerHTML += `\n            <div class=\"w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700\">\n                <h5 class=\"mb-2 text-3xl font-bold text-gray-900 dark:text-white\">${data.name}</h5>\n                <p class=\"mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400\">${getCountryName(data.lang)}</p>\n            </div>\n        `\n\n        let watch = await fetch(api+`api/watch?provider=${provider}&id=${id}`)\n        watch = await watch.json()\n        await loadData(watch)\n        loadVideo(videoList)\n    } catch (error) {\n        console.log(error)\n        document.querySelector(\"#topCard\").innerHTML += `\n            <div class=\"w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700\">\n                <h5 class=\"mb-2 text-3xl font-bold text-gray-900 dark:text-white\">Not Found</h5>\n                <p class=\"mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400\">Make sure you are connected to api</p>\n            </div>\n        `\n    }\n}\n\nasync function loadData(data){\n    document.querySelector(\"#title\").innerText = data.title\n    try {\n        for (let i = 0; i < data.video.length; i++) {\n            let video = data.video[i]\n            if(video.url.toLowerCase().includes(\"zippy\")){\n                let link = await parseZippy(video.url)\n                videoList.push({url:link,quality:video.quality})\n            } else {\n                videoList.push({url:video.url,quality:video.quality})\n            }\n        }\n    } catch (err) {\n        document.querySelector(\"#topCard\").innerHTML += `\n        <div class=\"w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700\">\n            <h5 class=\"mb-2 text-3xl font-bold text-gray-900 dark:text-white\">Video is detected from \"ip-based website\"</h5>\n            <a class=\"mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400\">if you want to play the video here, you can download the app version of this web in <a href=\"./download.html\">Here</a> or use this <a href=\"https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf\">Extension (Not Recommended)</a> please <a href=\"./allowCors.html\">README</a> if you want to use the extension</a>\n            <a class=\"mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400\">or just download manually... i guess</a>\n        </div>`\n        document.querySelector(\"#Notice\").innerHTML += `<a href=\"./allowCors.html\" class=\"btn btn-primary\">README</a>`\n        document.querySelector(\"#Notice\").classList.toggle(\"hidden\")\n    }\n    // loop data.downloads\n    for (let i = 0; i < data.downloads.length; i++) {\n        let download = data.downloads[i]\n        document.querySelector(\"#dls\").innerHTML += `\n                <div class=\"Quality\">\n                <h2 class=\"mb-2 text-lg font-semibold text-gray-900 dark:text-white\">${download.quality}</h2>\n                <ul class=\"space-y-1 max-w-md list-disc list-inside text-gray-500 dark:text-gray-400\">\n                    ${download.links.map((link) => `<li><a href=\"${link.url}\">${link.provider}</a></li>`).join(\"\")}\n                </ul>\n            </div>\n            `\n    }\n    if(data.prev){\n        document.querySelector(\"#prev\").setAttribute(\"href\", `./watch.html?provider=${provider}&id=${data.prev}`)\n        document.querySelector(\"#prev\").classList.toggle(\"hidden\")\n    }\n    if(data.next){\n        document.querySelector(\"#next\").setAttribute(\"href\", `./watch.html?provider=${provider}&id=${data.next}`)\n        document.querySelector(\"#next\").classList.toggle(\"hidden\")\n    }\n}\n\nasync function parseZippy(url) {\n    let res = (await (await fetch(url)).text())\n    // const $ = load(res.data);\n    res = res.split(\"document.getElementById('dlbutton').href\")[1]\n    let link = url.substring(0, url.indexOf(\"/d/\"));\n    const firstString = res.substring(\n      res.indexOf(\" = \\\"\") + 4,\n      res.indexOf(\"\\\" + (\"),\n    );\n    const num = parseInt(res.split(\"+ (\")[1].split(\"%\")[0]);\n    // console.log(num);\n    const lastString = res.substring(\n      res.indexOf(\"913) + \\\"\") + 8,\n      res.indexOf(\"\\\";\"),\n    );\n    const nums = (num % 51245 + num % 913);\n    link += firstString + nums.toString() + lastString;\n    console.log(link)\n    return link;\n  }\n  \nfunction loadVideo(data){\n    // loop data\n    selectVideo(data[0].quality)\n    if(data.length < 2) return\n    for (let i = 0; i < data.length; i++) {\n        document.querySelector(\"#quality\").innerHTML += `<option>${data[i].quality}</option>`        \n    }\n    document.querySelector(\"#selQua\").classList.toggle(\"hidden\")\n}\n\nfunction selectVideo(selector){\n    console.log(selector)\n    let video = videoList.find((el) => el.quality === selector)\n    console.log(video)\n    document.querySelector(\"#watchUrl\").setAttribute(\"src\",video.url)\n}"],"names":["query","URLSearchParams","window","location","search","provider","get","id","console","log","videoList","async","menu","api","localStorage","getItem","data","fetch","json","document","querySelector","innerHTML","name","getCountryName","lang","watch","loadData","loadVideo","error","innerText","title","i","video","length","url","toLowerCase","includes","link","parseZippy","push","quality","err","classList","toggle","downloads","download","links","map","join","prev","setAttribute","next","res","text","split","substring","indexOf","firstString","num","parseInt","lastString","toString","selectVideo","selector","find","el"],"version":3,"file":"watch.d187a94b.js.map"}