const query=new URLSearchParams(window.location.search);let provider=query.get("provider"),id=query.get("id");console.log(`provider of ${provider}`),console.log(`query of ${id}`);let videoList=[];async function menu(){let e=localStorage.getItem("API");try{let t=await fetch(e+"api/extension?extension="+provider);t=await t.json(),console.log(t),document.querySelector("#topCard").innerHTML+=`\n            <div class="w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700">\n                <h5 class="mb-2 text-3xl font-bold text-gray-900 dark:text-white">${t.name}</h5>\n                <p class="mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400">${getCountryName(t.lang)}</p>\n            </div>\n        `;let o=await fetch(e+`api/watch?provider=${provider}&id=${id}`);o=await o.json(),await loadData(o),loadVideo(videoList)}catch(e){console.log(e),document.querySelector("#topCard").innerHTML+='\n            <div class="w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700">\n                <h5 class="mb-2 text-3xl font-bold text-gray-900 dark:text-white">Not Found</h5>\n                <p class="mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400">Make sure you are connected to api</p>\n            </div>\n        '}}async function loadData(e){document.querySelector("#title").innerText=e.title;try{for(let t=0;t<e.video.length;t++){let o=e.video[t];if(o.url.toLowerCase().includes("zippy")){let e=await parseZippy(o.url);videoList.push({url:e,quality:o.quality})}else videoList.push({url:o.url,quality:o.quality})}}catch(e){document.querySelector("#topCard").innerHTML+='\n        <div class="w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700">\n            <h5 class="mb-2 text-3xl font-bold text-gray-900 dark:text-white">Video is detected from "ip-based website"</h5>\n            <a class="mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400">if you want to play the video here, you can download the app version of this web in <a href="./download.html">Here</a> or use this <a href="https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf">Extension (Not Recommended, use with caution cause it can lead you to bad things, or you can just make it allow from this website)</a></a>\n            <a class="mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400">or just download manually... i guess</a>\n        </div>'}for(let t=0;t<e.downloads.length;t++){let o=e.downloads[t];document.querySelector("#dls").innerHTML+=`\n                <div class="Quality">\n                <h2 class="mb-2 text-lg font-semibold text-gray-900 dark:text-white">${o.quality}</h2>\n                <ul class="space-y-1 max-w-md list-disc list-inside text-gray-500 dark:text-gray-400">\n                    ${o.links.map((e=>`<li><a href="${e.url}">${e.provider}</a></li>`)).join("")}\n                </ul>\n            </div>\n            `}e.prev&&(document.querySelector("#prev").setAttribute("href",`./watch.html?provider=${provider}&id=${e.prev}`),document.querySelector("#prev").classList.toggle("hidden")),e.next&&(document.querySelector("#next").setAttribute("href",`./watch.html?provider=${provider}&id=${e.next}`),document.querySelector("#next").classList.toggle("hidden"))}async function parseZippy(e){let t=await(await fetch(e)).text();t=t.split("document.getElementById('dlbutton').href")[1];let o=e.substring(0,e.indexOf("/d/"));const r=t.substring(t.indexOf(' = "')+4,t.indexOf('" + (')),a=parseInt(t.split("+ (")[1].split("%")[0]),l=t.substring(t.indexOf('913) + "')+8,t.indexOf('";'));return o+=r+(a%51245+a%913).toString()+l,console.log(o),o}function loadVideo(e){if(selectVideo(e[0].quality),!(e.length<2)){for(let t=0;t<e.length;t++)document.querySelector("#quality").innerHTML+=`<option>${e[t].quality}</option>`;document.querySelector("#selQua").classList.toggle("hidden")}}function selectVideo(e){console.log(e);let t=videoList.find((t=>t.quality===e));console.log(t),document.querySelector("#watchUrl").setAttribute("src",t.url)}menu();
//# sourceMappingURL=watch.35945b8b.js.map
