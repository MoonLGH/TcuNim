{"mappings":"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","sources":["src/assets/js/watch.js"],"sourcesContent":["const query = new URLSearchParams(window.location.search)\nlet api = localStorage.getItem(\"API\");\nlet provider = query.get(\"provider\")\nlet id = query.get(\"id\")\n\nconsole.log(`provider of ${provider}`)\nconsole.log(`query of ${id}`)\n\nlet videoList = []\ninitData()\nasync function initData(){\n    let watch = await fetch(api+`api/watch?provider=${provider}&id=${id}`)\n    watch = await watch.json()\n    await loadData(watch)\n    loadVideo(videoList)\n}\n\nmenu()\nasync function menu() {\n    try {\n        let data = await fetch(api + \"api/extension?extension=\" + provider)\n        data = await data.json();\n        console.log(data)\n        document.querySelector(\"#topCard\").innerHTML += `\n            <div class=\"w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700\">\n                <h5 class=\"mb-2 text-3xl font-bold text-gray-900 dark:text-white\">${data.name}</h5>\n                <p class=\"mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400\">${getCountryName(data.lang)}</p>\n            </div>\n        `\n    } catch (error) {\n        console.log(error)\n        document.querySelector(\"#topCard\").innerHTML += `\n            <div class=\"w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700\">\n                <h5 class=\"mb-2 text-3xl font-bold text-gray-900 dark:text-white\">Not Found</h5>\n                <p class=\"mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400\">Make sure you are connected to api</p>\n            </div>\n        `\n    }\n}\n\nasync function loadData(data){\n    document.querySelector(\"#title\").innerText = data.title\n    try {\n        for (let i = 0; i < data.video.length; i++) {\n            let video = data.video[i]\n            if(video.url.toLowerCase().includes(\"zippy\")){\n                let link = await parseZippy(video.url)\n                videoList.push({url:link,quality:video.quality})\n            } else {\n                videoList.push({url:video.url,quality:video.quality,iframe:video.iframe})\n            }\n        }\n    } catch (err) {\n        document.querySelector(\"#topCard\").innerHTML += `\n        <div class=\"w-full p-4 text-center bg-white border rounded-lg shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700\">\n            <h5 class=\"mb-2 text-3xl font-bold text-gray-900 dark:text-white\">Video is detected from \"ip-based website\"</h5>\n            <a class=\"mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400\">if you want to play the video here, you can download the app version of this web in <a href=\"./download.html\">Here</a> or use this <a href=\"https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf\">Extension (Not Recommended)</a> please <a href=\"./allowCors.html\">README</a> if you want to use the extension</a>\n            <a class=\"mb-5 text-base text-gray-500 sm:text-lg dark:text-gray-400\">or just download manually... i guess</a>\n        </div>`\n        document.querySelector(\"#Notice\").innerHTML += `<a href=\"./allowCors.html\" class=\"btn btn-primary\">README</a>`\n        document.querySelector(\"#Notice\").classList.toggle(\"hidden\")\n    }\n    // loop data.downloads\n    for (let i = 0; i < data.downloads.length; i++) {\n        let download = data.downloads[i]\n        document.querySelector(\"#dls\").innerHTML += `\n                <div class=\"Quality\">\n                <h2 class=\"mb-2 text-lg font-semibold text-gray-900 dark:text-white\">${download.quality}</h2>\n                <ul class=\"space-y-1 max-w-md list-disc list-inside text-gray-500 dark:text-gray-400\">\n                    ${download.links.map((link) => `<li><a href=\"${link.url}\">${link.provider}</a></li>`).join(\"\")}\n                </ul>\n            </div>\n            `\n    }\n    if(data.prev){\n        document.querySelector(\"#prev\").setAttribute(\"href\", `./watch.html?provider=${provider}&id=${data.prev}`)\n        document.querySelector(\"#prev\").classList.toggle(\"hidden\")\n    }\n    if(data.next){\n        document.querySelector(\"#next\").setAttribute(\"href\", `./watch.html?provider=${provider}&id=${data.next}`)\n        document.querySelector(\"#next\").classList.toggle(\"hidden\")\n    }\n}\n\nasync function parseZippy(url) {\n    let res = (await (await fetch(url)).text())\n    // const $ = load(res.data);\n    let link = url.substring(0, url.indexOf(\"/d/\"));\n    let id = url.split(\"/d/\")[1].split(\"/\")[0];\n    console.log(url)\n    const num = parseInt(res.match(/.omg = (\\d+)%78956/)[1]) % 78956;\n    const lastStr = res.match(/\\+\"(.+?)\"/);\n    link += \"/d/\"+ id + \"/\" + (num+18) + lastStr[1];\n    console.log(link);\n    // console.log(link);\n    return link;\n  }\n  \nfunction loadVideo(data){\n    // loop data\n    selectVideo(data[0].quality)\n    if(data.length < 2) return\n    for (let i = 0; i < data.length; i++) {\n        document.querySelector(\"#quality\").innerHTML += `<option>${data[i].quality}</option>`        \n    }\n    document.querySelector(\"#selQua\").classList.toggle(\"hidden\")\n}\n\nfunction selectVideo(selector){\n    console.log(selector)\n    let video = videoList.find((el) => el.quality === selector)\n    console.log(video)\n    if (video.iframe){\n        document.querySelector(\"#watchUrl\").classList.add(\"hidden\")\n        document.querySelector(\"#watchUrliframe\").classList.remove(\"hidden\")\n        document.querySelector(\"#watchUrliframe\").setAttribute(\"src\",video.url)\n    } else {\n        document.querySelector(\"#watchUrl\").classList.remove(\"hidden\")\n        document.querySelector(\"#watchUrliframe\").classList.add(\"hidden\")\n        document.querySelector(\"#watchUrl\").setAttribute(\"src\",video.url)\n    }\n}"],"names":["query","URLSearchParams","window","location","search","api","localStorage","getItem","provider","get","id","console","log","videoList","async","initData","watch","fetch","json","loadData","loadVideo","menu","data","document","querySelector","innerHTML","name","getCountryName","lang","error","innerText","title","i","video","length","url","toLowerCase","includes","link","parseZippy","push","quality","iframe","err","classList","toggle","downloads","download","links","map","join","prev","setAttribute","next","res","text","substring","indexOf","split","parseInt","match","selectVideo","selector","find","el","add","remove"],"version":3,"file":"watch.475009e2.js.map"}